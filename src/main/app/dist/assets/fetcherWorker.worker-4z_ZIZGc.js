(function(){"use strict";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const v=Symbol("Comlink.proxy"),W=Symbol("Comlink.endpoint"),F=Symbol("Comlink.releaseProxy"),A=Symbol("Comlink.finalizer"),E=Symbol("Comlink.thrown"),L=e=>typeof e=="object"&&e!==null||typeof e=="function",V={canHandle:e=>L(e)&&e[v],serialize(e){const{port1:r,port2:n}=new MessageChannel;return O(e,r),[n,[n]]},deserialize(e){return e.start(),G(e)}},$={canHandle:e=>L(e)&&E in e,serialize({value:e}){let r;return e instanceof Error?r={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:r={isError:!1,value:e},[r,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},T=new Map([["proxy",V],["throw",$]]);function I(e,r){for(const n of e)if(r===n||n==="*"||n instanceof RegExp&&n.test(r))return!0;return!1}function O(e,r=globalThis,n=["*"]){r.addEventListener("message",function b(x){if(!x||!x.data)return;if(!I(n,x.origin)){console.warn(`Invalid origin '${x.origin}' for comlink proxy`);return}const{id:a,type:t,path:o}=Object.assign({path:[]},x.data),s=(x.data.argumentList||[]).map(h);let g;try{const i=o.slice(0,-1).reduce((d,c)=>d[c],e),l=o.reduce((d,c)=>d[c],e);switch(t){case"GET":g=l;break;case"SET":i[o.slice(-1)[0]]=h(x.data.value),g=!0;break;case"APPLY":g=l.apply(i,s);break;case"CONSTRUCT":{const d=new l(...s);g=J(d)}break;case"ENDPOINT":{const{port1:d,port2:c}=new MessageChannel;O(e,c),g=B(d,[d])}break;case"RELEASE":g=void 0;break;default:return}}catch(i){g={value:i,[E]:0}}Promise.resolve(g).catch(i=>({value:i,[E]:0})).then(i=>{const[l,d]=k(i);r.postMessage(Object.assign(Object.assign({},l),{id:a}),d),t==="RELEASE"&&(r.removeEventListener("message",b),_(r),A in e&&typeof e[A]=="function"&&e[A]())}).catch(i=>{const[l,d]=k({value:new TypeError("Unserializable return value"),[E]:0});r.postMessage(Object.assign(Object.assign({},l),{id:a}),d)})}),r.start&&r.start()}function U(e){return e.constructor.name==="MessagePort"}function _(e){U(e)&&e.close()}function G(e,r){return R(e,[],r)}function S(e){if(e)throw new Error("Proxy has been released and is not useable")}function z(e){return m(e,{type:"RELEASE"}).then(()=>{_(e)})}const M=new WeakMap,C="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const r=(M.get(e)||0)-1;M.set(e,r),r===0&&z(e)});function q(e,r){const n=(M.get(r)||0)+1;M.set(r,n),C&&C.register(e,r,e)}function Y(e){C&&C.unregister(e)}function R(e,r=[],n=function(){}){let b=!1;const x=new Proxy(n,{get(a,t){if(S(b),t===F)return()=>{Y(x),z(e),b=!0};if(t==="then"){if(r.length===0)return{then:()=>x};const o=m(e,{type:"GET",path:r.map(s=>s.toString())}).then(h);return o.then.bind(o)}return R(e,[...r,t])},set(a,t,o){S(b);const[s,g]=k(o);return m(e,{type:"SET",path:[...r,t].map(i=>i.toString()),value:s},g).then(h)},apply(a,t,o){S(b);const s=r[r.length-1];if(s===W)return m(e,{type:"ENDPOINT"}).then(h);if(s==="bind")return R(e,r.slice(0,-1));const[g,i]=j(o);return m(e,{type:"APPLY",path:r.map(l=>l.toString()),argumentList:g},i).then(h)},construct(a,t){S(b);const[o,s]=j(t);return m(e,{type:"CONSTRUCT",path:r.map(g=>g.toString()),argumentList:o},s).then(h)}});return q(x,e),x}function X(e){return Array.prototype.concat.apply([],e)}function j(e){const r=e.map(k);return[r.map(n=>n[0]),X(r.map(n=>n[1]))]}const D=new WeakMap;function B(e,r){return D.set(e,r),e}function J(e){return Object.assign(e,{[v]:!0})}function k(e){for(const[r,n]of T)if(n.canHandle(e)){const[b,x]=n.serialize(e);return[{type:"HANDLER",name:r,value:b},x]}return[{type:"RAW",value:e},D.get(e)||[]]}function h(e){switch(e.type){case"HANDLER":return T.get(e.name).deserialize(e.value);case"RAW":return e.value}}function m(e,r,n){return new Promise(b=>{const x=Q();e.addEventListener("message",function a(t){!t.data||!t.data.id||t.data.id!==x||(e.removeEventListener("message",a),b(t.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:x},r),n)})}function Q(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function Z(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var K={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]};function ee(e,r,n){return e*(1-n)+r*n}var re=ee,N=K,P=re,ne=ie;function ie(e){var r,n,b,x,a,t,o,s,d,g,i;if(e||(e={}),s=(e.nshades||72)-1,o=e.format||"hex",t=e.colormap,t||(t="jet"),typeof t=="string"){if(t=t.toLowerCase(),!N[t])throw Error(t+" not a supported colorscale");a=N[t]}else if(Array.isArray(t))a=t.slice();else throw Error("unsupported colormap option",t);if(a.length>s+1)throw new Error(t+" map requires nshades to be at least size "+a.length);Array.isArray(e.alpha)?e.alpha.length!==2?g=[1,1]:g=e.alpha.slice():typeof e.alpha=="number"?g=[e.alpha,e.alpha]:g=[1,1],r=a.map(function(u){return Math.round(u.index*s)}),g[0]=Math.min(Math.max(g[0],0),1),g[1]=Math.min(Math.max(g[1],0),1);var l=a.map(function(u,f){var y=a[f].index,w=a[f].rgb.slice();return w.length===4&&w[3]>=0&&w[3]<=1||(w[3]=g[0]+(g[1]-g[0])*y),w}),d=[];for(i=0;i<r.length-1;++i){x=r[i+1]-r[i],n=l[i],b=l[i+1];for(var c=0;c<x;c++){var p=c/x;d.push([Math.round(P(n[0],b[0],p)),Math.round(P(n[1],b[1],p)),Math.round(P(n[2],b[2],p)),P(n[3],b[3],p)])}}return d.push(a[a.length-1].rgb.concat(g[1])),o==="hex"?d=d.map(ge):o==="rgbaString"?d=d.map(de):o==="float"&&(d=d.map(te)),d}function te(e){return[e[0]/255,e[1]/255,e[2]/255,e[3]]}function ge(e){for(var r,n="#",b=0;b<3;++b)r=e[b],r=r.toString(16),n+=("00"+r).substr(r.length);return n}function de(e){return"rgba("+e.join(",")+")"}var H=Z(ne);async function be(e,r,n,b,x,a){var g;const t=[],o=[];let s;try{const i=await fetch(`${e}?${new URLSearchParams({from:String(b.from),to:String(b.to)})}`,{method:a,headers:{authorization:`${x}`}});if(console.log(i),s=i.status,s!==200)throw new Error(String(s));const l=await i.json();for(let d of l)t.push((g=d==null?void 0:d._id)==null?void 0:g[n]),o.push(d[r])}catch(i){return console.log("FROM WORKER: ",i==null?void 0:i.message),{status:i.message,labels:t,data:o,label:r}}return{status:s,labels:t,data:o,label:r}}var xe=Object.freeze({__proto__:null,fetchData:async({srcUrl:e,dataKey:r,labelKey:n,method:b,filter:x,type:a,apiKey:t})=>{const o=[],s=new Set;let g,i=[];const{status:l,labels:d,data:c,label:p}=await be(e,r,n,x,t,b);g=l;for(const f of d)s.add(f);i=Array.from(s);const u={backgroundColor:[],borderColor:[],borderWidth:1};if(u.backgroundColor=[],u.borderColor=[],a!=="line"&&a!=="bar"&&a!=="radar"){let f=H({colormap:"salinity",nshades:Math.max(9,i==null?void 0:i.length),format:"hex",alpha:1});for(let y=0;y<i.length;y++)u.backgroundColor.push(f[y]),u.borderColor.push(f[y]);console.log(u)}else{let f=H({colormap:"salinity",nshades:Math.max(9),format:"hex",alpha:1});u.backgroundColor=f[0],u.borderColor=f[0]}return o.push({label:p,data:c,...u}),{status:g,chartData:{labels:i,datasets:o}}}});O(xe)})();
